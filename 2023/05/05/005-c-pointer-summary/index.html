<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>005-c-pointer-summary | zoug2016</title><meta name="description" content="指针是一种保存变量地址的变量 声明解释先从最内层开始 先从名字p的右边开始看，再到左边。 然后跳到外一层右边开始，再到外一层的左边开始看。 不断循环，直到没有符号为止    函数指针与指针函数 指针函数，简单的来说，就是一个返回指针的函数，其本质是一个函数，而该函数的返回值是一个指针。 声明格式为：类型标识符* 函数名(参数表)  12int fun(int x,int y); &#x2F;&#x2F;一个函数，然"><meta property="og:type" content="article"><meta property="og:title" content="005-c-pointer-summary"><meta property="og:url" content="https://zoug2016.github.io/2023/05/05/005-c-pointer-summary/index.html"><meta property="og:site_name" content="zoug2016"><meta property="og:description" content="指针是一种保存变量地址的变量 声明解释先从最内层开始 先从名字p的右边开始看，再到左边。 然后跳到外一层右边开始，再到外一层的左边开始看。 不断循环，直到没有符号为止    函数指针与指针函数 指针函数，简单的来说，就是一个返回指针的函数，其本质是一个函数，而该函数的返回值是一个指针。 声明格式为：类型标识符* 函数名(参数表)  12int fun(int x,int y); &#x2F;&#x2F;一个函数，然"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://zoug2016.github.io/2023/05/05/005-c-pointer-summary/image-20230506005739492.png"><meta property="article:published_time" content="2023-05-05T14:40:35.000Z"><meta property="article:modified_time" content="2023-05-05T17:01:42.800Z"><meta property="article:author" content="zoug2016"><meta property="article:tag" content="c"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://zoug2016.github.io/2023/05/05/005-c-pointer-summary/image-20230506005739492.png"><link rel="canonical" href="https://zoug2016.github.io/2023/05/05/005-c-pointer-summary/index.html"><link rel="alternate" href="/atom.xml" title="zoug2016" type="application/atom+xml"><link rel="icon" href="/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 6.3.0"></head><body class="main-center" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="https://github.com/zoug2016" target="_blank"><img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">zoug2016</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">Embedded Developer</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shijiazhuang, China</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="Search"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav menu-highlight"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">Home</span></a></li><li class="menu-item menu-item-categories"><a href="/categories"><i class="icon icon-folder"></i> <span class="menu-title">Categories</span></a></li><li class="menu-item menu-item-tags"><a href="/tags"><i class="icon icon-tags"></i> <span class="menu-title">Tags</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">Archives</span></a></li><li class="menu-item menu-item-about"><a href="/about"><i class="icon icon-cup-fill"></i> <span class="menu-title">About</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/zoug2016" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">Categories</h3><div class="widget-body"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/c/">c</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/c/c-pointer/">c_pointer</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/ebd/">ebd</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/ebd/books/">books</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/freertos/">freertos</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mpu/">mpu</a><span class="category-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tags</h3><div class="widget-body"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/books/" rel="tag">books</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/" rel="tag">c</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ebd/" rel="tag">ebd</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/freertos/" rel="tag">freertos</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mpu/" rel="tag">mpu</a><span class="tag-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Archive</h3><div class="widget-body"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a><span class="archive-list-count">7</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Recent Posts</h3><div class="widget-body"><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/hexo/">hexo</a></p><p class="item-title"><a href="/2023/05/31/006-hexo-basic/" class="title">006-hexo-basic</a></p><p class="item-date"><time datetime="2023-05-31T15:42:26.000Z" itemprop="datePublished">2023-05-31</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/c/">c</a><i class="icon icon-angle-right"></i><a class="category-link" href="/categories/c/c-pointer/">c_pointer</a></p><p class="item-title"><a href="/2023/05/05/005-c-pointer-summary/" class="title">005-c-pointer-summary</a></p><p class="item-date"><time datetime="2023-05-05T14:40:35.000Z" itemprop="datePublished">2023-05-05</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/freertos/">freertos</a><i class="icon icon-angle-right"></i><a class="category-link" href="/categories/mpu/">mpu</a></p><p class="item-title"><a href="/2023/05/03/004-freertos-mpu-cm3-demo/" class="title">004-freertos-mpu-cm3-demo</a></p><p class="item-date"><time datetime="2023-05-03T15:13:02.000Z" itemprop="datePublished">2023-05-03</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/hexo/">hexo</a></p><p class="item-title"><a href="/2023/05/03/003-hexo-front-matter-rules/" class="title">003-hexo-front-matter-rules</a></p><p class="item-date"><time datetime="2023-05-03T02:07:59.000Z" itemprop="datePublished">2023-05-03</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/ebd/">ebd</a><i class="icon icon-angle-right"></i><a class="category-link" href="/categories/ebd/books/">books</a></p><p class="item-title"><a href="/2023/05/03/002-ebd-basic-books/" class="title">002-ebd-basic-books</a></p><p class="item-date"><time datetime="2023-05-03T01:31:04.000Z" itemprop="datePublished">2023-05-03</time></p></div></li></ul></div></div></div></aside><aside class="sidebar sidebar-toc collapse in" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><nav id="toc" class="article-toc"><h3 class="toc-title">Catalogue</h3><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88%E4%B8%8E%E6%8C%87%E9%92%88%E5%87%BD%E6%95%B0"><span class="toc-number">1.</span> <span class="toc-text">函数指针与指针函数</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%8C%87%E9%92%88%E4%B8%8E%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84"><span class="toc-number">2.</span> <span class="toc-text">数组指针与指针数组</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%8D%E6%9D%82%E6%8C%87%E9%92%88%E5%A3%B0%E6%98%8E"><span class="toc-number">3.</span> <span class="toc-text">复杂指针声明</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E7%AE%80%E5%8D%95%E7%9A%84%E6%8C%87%E9%92%88%E5%8F%98%E9%87%8F"><span class="toc-number">3.1.</span> <span class="toc-text">声明简单的指针变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%9F%E5%8F%B7-%E7%94%A8%E4%BA%8E%E5%A3%B0%E6%98%8E%E8%AF%AD%E5%8F%A5%E6%97%B6%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">3.1.1.</span> <span class="toc-text">星号 * 用于声明语句时的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%9F%E5%8F%B7-%E7%94%A8%E4%BA%8E%E5%A3%B0%E6%98%8E%E8%AF%AD%E5%8F%A5%E4%B9%8B%E5%A4%96%E6%97%B6%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">3.1.2.</span> <span class="toc-text">星号 * 用于声明语句之外时的作用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E6%9D%82%E5%A3%B0%E6%98%8E%E5%92%8C%E5%A3%B0%E6%98%8E%E8%AF%AD%E6%B3%95"><span class="toc-number">3.2.</span> <span class="toc-text">复杂声明和声明语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E6%8C%87%E5%90%91%E6%8C%87%E9%92%88%E7%9A%84%E6%8C%87%E9%92%88%E5%8F%98%E9%87%8F"><span class="toc-number">3.2.1.</span> <span class="toc-text">声明指向指针的指针变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#C%E8%AF%AD%E8%A8%80%E4%B8%AD%E5%A3%B0%E6%98%8E%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-number">3.2.2.</span> <span class="toc-text">C语言中声明的语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%A4%8D%E6%9D%82%E5%A3%B0%E6%98%8E"><span class="toc-number">3.2.3.</span> <span class="toc-text">使用复杂声明</span></a></li></ol></li></ol></li></ol></nav></div></aside><main class="main" role="main"><div class="content"><article id="post-005-c-pointer-summary" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">005-c-pointer-summary</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/2023/05/05/005-c-pointer-summary/" class="article-date"><time datetime="2023-05-05T14:40:35.000Z" itemprop="datePublished">2023-05-05</time> </a></span><span class="article-category"><i class="icon icon-folder"></i> <a class="article-category-link" href="/categories/c/">c</a>►<a class="article-category-link" href="/categories/c/c-pointer/">c_pointer</a> </span><span class="article-tag"><i class="icon icon-tags"></i> <a class="article-tag-link-link" href="/tags/c/" rel="tag">c</a> </span><span class="post-comment"><i class="icon icon-comment"></i> <a href="/2023/05/05/005-c-pointer-summary/#comments" class="article-comment-link">Comments</a></span></div></div><div class="article-entry marked-body" itemprop="articleBody"><ul><li>指针是一种保存变量地址的变量</li><li>声明解释先从最内层开始<ul><li>先从名字p的右边开始看，再到左边。</li><li>然后跳到外一层右边开始，再到外一层的左边开始看。</li><li>不断循环，直到没有符号为止</li></ul></li></ul><h1 id="函数指针与指针函数"><a href="#函数指针与指针函数" class="headerlink" title="函数指针与指针函数"></a>函数指针与指针函数</h1><ul><li><p>指针函数，简单的来说，就是一个返回指针的函数，其本质是一个函数，而该函数的返回值是一个指针。</p><p>声明格式为：类型标识符* 函数名(参数表)</p><blockquote><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int fun(int x,int y); //一个函数，然后返回值是一个 int 类型，是一个数值</span><br><span class="line">int* fun(int x,int y); //唯一的区别就是在函数名前面多了一个*号，而这个函数就是一个指针函数。其返回值是一个 int 类型的指针，是一个地址。</span><br></pre></td></tr></table></figure></blockquote></li><li><p>函数指针，其本质是一个指针变量，该指针指向这个函数。总结来说，函数指针就是指向函数的指针。</p><p>类型说明符 (*函数名) (参数)</p><blockquote><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">int (*fun)(int x,int y); </span><br><span class="line">函数指针是需要把一个函数的地址赋值给它，有两种写法：</span><br><span class="line">fun = &amp;Function；</span><br><span class="line">fun = Function;</span><br><span class="line">取地址运算符&amp;不是必需的，因为一个函数标识符就表示了它的地址，如果是函数调用，还必须包含一个圆括号括起来的参数表。</span><br><span class="line"></span><br><span class="line">调用函数指针的方式也有两种：</span><br><span class="line">x = (*fun)();</span><br><span class="line">x = fun();</span><br><span class="line">两种方式均可，其中第二种看上去和普通的函数调用没啥区别，如果可以的话，建议使用第一种，因为可以清楚的指明这是通过指针的方式来调用函数。当然，也要看个人习惯，如果理解其定义，随便怎么用都行啦。</span><br></pre></td></tr></table></figure></blockquote></li></ul><h1 id="数组指针与指针数组"><a href="#数组指针与指针数组" class="headerlink" title="数组指针与指针数组"></a>数组指针与指针数组</h1><ul><li>指针数组</li></ul><blockquote><p>首先它是一个数组，数组的元素都是指针，数组占多少个字节由数组本身的大小决定，每一个元素都是一个指针，在32 位系统下任何类型的指针永远是占4 个字节。它是“储存指针的数组”的简称。</p></blockquote><ul><li>数组指针</li></ul><blockquote><p>首先它是一个指针，它指向一个数组。在32 位系统下任何类型的指针永远是占4 个字节，至于它指向的数组占多少字节，不知道，具体要看数组大小。它是“指向数组的指针”的简称。</p></blockquote><p>A) int *p1[10];</p><p>B) int (*p2)[10];</p><p>到底哪个是数组指针，哪个是指针数组呢</p><blockquote><p>“[]”的优先级比“<em>”要高。p1 先与“[]”结合，构成一个数组的定义，数组名为p1，int <em>修饰的是数组的内容，即数组的每个元素。那现在我们清楚，这是一个数组，其包含10 个指向int 类型数据的指针，即**指针数组</em></em></p></blockquote><blockquote><p>至于p2 就更好理解了，在这里“（）”的优先级比“[]”高，“*”号和p2 构成一个指针的定义，指针变量名为p2，int 修饰的是数组的内容，即数组的每个元素。数组在这里并没有名字，是个匿名数组。那现在我们清楚p2 是一个指针，它指向一个包含10 个int 类型数据的数组，即<strong>数组指针</strong>。</p></blockquote><p>我们可以借助下面的图加深理解：</p><p><img src="/2023/05/05/005-c-pointer-summary/image-20230506005739492.png"></p><h1 id="复杂指针声明"><a href="#复杂指针声明" class="headerlink" title="复杂指针声明"></a>复杂指针声明</h1><h2 id="声明简单的指针变量"><a href="#声明简单的指针变量" class="headerlink" title="声明简单的指针变量"></a>声明简单的指针变量</h2><p>如下代码：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> a = <span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> *p; <span class="comment">//声明一个指向int类型的指针变量p</span></span><br><span class="line">p = &amp;a; <span class="comment">//把a的地址赋值给指针p</span></span><br><span class="line">*p = <span class="number">1000</span>; <span class="comment">//修改a值为1000</span></span><br></pre></td></tr></table></figure><p>这段代码声明了一个指针变量p，赋值指向了a，可通过*p访问到变量a，并对a进行值的修改。星号 * 是一元运算符，它用在不同的地方将具有不同的作用。</p><h3 id="星号-用于声明语句时的作用"><a href="#星号-用于声明语句时的作用" class="headerlink" title="星号 * 用于声明语句时的作用"></a>星号 * 用于声明语句时的作用</h3><p>上面代码中的第二行中的 * 对于指针的声明，首先从p这里开始看，这是c语言中声明的语法</p><p><strong>第1步</strong>：先看p的右边有没有其他符号（分号不算），可以看到p的右边没有符号</p><p><strong>第2步</strong>：看p的左边，在p的左边有一个星号 * ，这里的 * 作用在p上面，其产生的效果是声明变量p是一个指针。到目前只知道p是一个指针，但还不知道该指针是指向什么类型的数据</p><p><strong>第3步</strong>：星号 * 左边是数据类型int，int的作用是声明p指向的数据类型是int类型</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">上面的int和*两个符号的发挥作用是有先后顺序的，先是 * 发挥作用声明p是一个指针，然后是int发挥作用，声明指向的数据类型是int</span><br></pre></td></tr></table></figure><h3 id="星号-用于声明语句之外时的作用"><a href="#星号-用于声明语句之外时的作用" class="headerlink" title="星号 * 用于声明语句之外时的作用"></a>星号 * 用于声明语句之外时的作用</h3><p>代码中*p &#x3D; 1000;中 * 用于声明语句之外时的作用，这句等效于 a &#x3D; 1000; 当 * 作用于指针变量p时，就时访问指针变量p所指向的变量a。</p><h2 id="复杂声明和声明语法"><a href="#复杂声明和声明语法" class="headerlink" title="复杂声明和声明语法"></a>复杂声明和声明语法</h2><h3 id="声明指向指针的指针变量"><a href="#声明指向指针的指针变量" class="headerlink" title="声明指向指针的指针变量"></a>声明指向指针的指针变量</h3><p>代码如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">int a = 100;</span><br><span class="line">int *p; //声明一个指向int类型的指针变量p</span><br><span class="line">p = &amp;a; //把a的地址赋值给指针p</span><br><span class="line">int **pp;//声明指向指针的指针变量pp</span><br><span class="line">pp = &amp;p;//pp指向变量p, p是指针变量</span><br><span class="line">**p = 1000; //修改a值为1000</span><br></pre></td></tr></table></figure><p>前三行代码在前面已经介绍过了</p><p>主要对第四行开始的代码进行介绍：</p><p>第四行 int **pp;与 int *(* pp);是等效的，因为* 和 ++ 这样的一元运算符遵循从右往左的结合顺序。</p><blockquote><p>对int *(* pp)；进行分析，从变量名pp开始：</p><ul><li><p><strong>第1步</strong>：先看pp右边有一个右括号，括号只是强调结合顺序，不用管它</p></li><li><p><strong>第2步</strong>：看pp的左边，可以看到右数的第一个*, 该星号的作用是声明变量pp是一个指针，此时还不知道pp所指向的数据类型</p></li><li><p><strong>第3步</strong>：先看括号的右边，没有其他符号，分号只是语句的结束而已</p></li><li><p><strong>第4步</strong>：看括号的左边，是一个* (右数第二个星号)，这个星号的作用是：声明指针变量pp所指向的数据类型是指针类型，此时我知道了pp指向的数据类型是指针类型（即代码中p的数据类型），但还不知道所指向的指向是指向什么类型的数据。</p></li><li><p><strong>第5步</strong>：看最左边的符号是int，这个int的作用是：声明pp指向的指针所指向的数据类型是int，即pp指向的是int类型的指针。</p></li></ul></blockquote><p>总结下：<strong>pp左边第一个星号 * 声明了pp是一个指向变量，第二个星号 * 声明了指针变量pp指向的数据类型是指针类型，而类型说明符int则声明了pp指向的指针指向的数据类型是int</strong></p><h3 id="C语言中声明的语法"><a href="#C语言中声明的语法" class="headerlink" title="C语言中声明的语法"></a>C语言中声明的语法</h3><p>在c语言中解释一个声明，并不是从左到右，也不是从右到左解释，而是从变量名开始解释<strong>。声明总是由很多符号和唯一的变量名结合而成，这些符号和唯一的变量名结合就是声明符。</strong></p><p>声明的形式为：“T D”, 其中T表示类型，D代表声明符，如：</p><p>int *p; int就是T, *p就是D。</p><p><strong>下面以变量名p和很多符号来结合组成声明符</strong>，如[], (), *。</p><ul><li><ol><li>当p与符号[]相结合（[]在p的右边）时，符号[]的作用是声明变量p是一个数组类型。[]中的数字决定了数组中的元素的个数。如下面的声明代码：</li></ol><blockquote><p>int p[10]; &#x2F;&#x2F; 声明变量p是一个整型数组，数组中有5个元素</p></blockquote><p>需要主要的是**[]的优先级比星号 * 的优先级高**。</p></li><li><ol start="2"><li>当 p 与符号 （）结合时（ （）在p的右边），符号（）的作用就是声明p时一个函数，通过p()可以调用该函数，（）中的可以有参数列表或无参数列表，如下面的代码：</li></ol><blockquote><p>int p(); &#x2F;&#x2F;声明函数p，返回类型是int</p><p>int p(int a, int b); &#x2F;&#x2F;声明一个带形参int类型的a和b的函数p，返回数据类型是int</p></blockquote><p>同样<strong>符号（）的优先级比 * 高</strong></p></li><li><ol start="3"><li>当 p和星号 * 相结合时（星号在p的左边），符号 * 的作用就是声明p是一个指针类型，如下代码：</li></ol><blockquote><p>int *p; &#x2F;&#x2F;声明p是一个指针，该指针指向int数据类型</p></blockquote></li></ul><p>介绍完这3个符号后，继续介绍语法：<strong>在介绍声明时，首先要决定声明的变量p是什么东西，而和p最近的符号则决定了p是什么东西</strong>。如下面的声明：</p><blockquote><p>int p(); &#x2F;&#x2F; p是函数</p><p>int *p; &#x2F;&#x2F; p是指针</p><p>int p[5]; &#x2F;&#x2F; p是数组</p><p>int *p[5];&#x2F;&#x2F; p是数组，数组里面有5个元素，每个元素是指向int类型的指针</p></blockquote><p>对int <em>p[5];进行下解释，由于[]的优先级比 * 高，所以[]先作用于p，故p是一个数组，再看左边是</em>，说明数组中的元素是指针类型，再往左知道了指向的是int数据类型，所以这个声明的结果就是：声明了一个数组，数组有5个元素，每个元素都是指向int整型数据的指针。</p><p>总结就是：<strong>解释声明要名字p开始</strong>，然后从<strong>p的右边开始看符号，决定了p是什么</strong>（优先级高的符号是[]和（），如果有符号先和p结合，是数组或函数），<strong>p左边的符号发挥作用</strong>（要么是*，要是什么都没有），<strong>最后发挥作用的是类型说明</strong>（它在最外面）。</p><blockquote><p>就是不断问<strong>什么</strong>，然后从里往外看符号来<strong>解答什么</strong>的过程。</p></blockquote><p>解释声明的方法就是：<strong>先从最内层开始看符号，先从名字p的右边开始看，再到左边。然后跳到外一层右边开始，再到外一层的左边开始看。不断循环，直到没有符号为止</strong></p><p>下面进行更加复杂的声明解释：</p><blockquote><p>char (*(*x())[])();</p></blockquote><p>先从最里面x变量名开始，x的右边是（），所以x是函数。 再看x的左边，是一个星号 * ，所以x是函数，返回值类型是指针类型</p><p>继续跳外一层开始，右边是[], 所以指针指向的是一个数组，再看左边是*，所以数组中的元素的类型是指针类型</p><p>再看外一层，右边是()，所以数组中的指针指向的是函数，最后看左边的类型是char，所以函数的返回值类型是char类型。</p><p><strong>整个声明</strong>就是：x是一个函数，函数的返回类型是指针类型，这个指针指向的是一个数组，这个数组是指针数组（里面元素是指针），数组中的指针是函数指针，指向的函数的返回值类型是char类型。</p><blockquote><p>char (*(*x[3])())[5];</p></blockquote><p>声明的结果是：x是一个数组，数组有3个元素，元素的类型是指针类型，指针是函数指针，所指向的函数返回值为指针，返回的指针指向数组，数组有5个元素，元素的数据类型为char类型。</p><h3 id="使用复杂声明"><a href="#使用复杂声明" class="headerlink" title="使用复杂声明"></a>使用复杂声明</h3><p>比如：声明一个函数x，函数x的返回值是指针类型，该指针指向数组，数组的元素类型为char。</p><ul><li><p>函数x</p><blockquote><p>x()</p></blockquote></li><li><p>函数x的返回值是指针类型</p><blockquote><p>*x()</p></blockquote></li><li><p>指针指向数组</p><blockquote><p>(*x())[]</p></blockquote></li><li><p>数组的元素类型为char</p><blockquote><p>char (*x())[];</p></blockquote></li></ul><p>对（*(void(*)())0)() 解释，来源于c陷阱与缺陷</p><blockquote><p>找中间位置，是一个指针，指针指向函数即函数指针。</p><p>0强制转为函数指针，然后获取函数指针的内容</p><p>进行函数调用，即对0地址进行函数调用</p></blockquote><p>优雅一点改进：</p><p>typedef void (*pfun)(void);</p><p>(*(pfun)0)();</p></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="https://zoug2016.github.io/2023/05/05/005-c-pointer-summary/" title="005-c-pointer-summary" target="_blank" rel="external">https://zoug2016.github.io/2023/05/05/005-c-pointer-summary/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="https://github.com/zoug2016" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/images/avatar.jpg" class="img-rounded w-full" alt=""></a></div><div class="media-body"><h3 class="media-heading"><a href="https://github.com/zoug2016" target="_blank"><span class="text-dark">zoug2016</span><small class="ml-1x">Embedded Developer</small></a></h3><div>like embedded software development</div></div></figure></div></div></div></article><section id="comments"><div id="vcomments"></div></section></div><nav class="bar bar-footer clearfix" data-stick-bottom><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/2023/05/31/006-hexo-basic/" title="006-hexo-basic"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a></li><li class="next"><a href="/2023/05/03/004-freertos-mpu-cm3-demo/" title="004-freertos-mpu-cm3-demo"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li><li class="toggle-toc"><a class="toggle-btn" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="Catalogue" role="button"><span>[&nbsp;</span><span>Catalogue</span> <i class="text-collapsed icon icon-anchor"></i> <i class="text-in icon icon-close"></i> <span>]</span></a></li></ul><button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>$</span></button><div class="bar-right"><div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div></div></div></nav><div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content donate"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><div class="modal-body"><div class="donate-box"><div class="donate-head"><p>Maybe you could buy me a cup of coffee.</p></div><div class="tab-content"><div role="tabpanel" class="tab-pane fade active in" id="alipay"><div class="donate-payimg"><img src="/images/donate/alipayimg.png" alt="Scan Qrcode" title="Scan"></div><p class="text-muted mv">Scan this qrcode</p><p class="text-grey">Open alipay app scan this qrcode, buy me a coffee!</p></div><div role="tabpanel" class="tab-pane fade" id="wechatpay"><div class="donate-payimg"><img src="/images/donate/wechatpayimg.png" alt="Scan Qrcode" title="Scan"></div><p class="text-muted mv">Scan this qrcode</p><p class="text-grey">Open wechat app scan this qrcode, buy me a coffee!</p></div></div><div class="donate-footer"><ul class="nav nav-tabs nav-justified" role="tablist"><li role="presentation" class="active"><a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> alipay</a></li><li role="presentation"><a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> wechat payment</a></li></ul></div></div></div></div></div></div></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/zoug2016" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li></ul><div class="copyright"><div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/npm/valine"></script><script type="text/javascript">var GUEST=["nick","mail","link"],meta=(meta="nick,mail,link").split(",").filter(function(e){return-1<GUEST.indexOf(e)});new Valine({el:"#vcomments",verify:!1,notify:!1,appId:"",appKey:"",placeholder:"Just go go",avatar:"mm",meta:meta,pageSize:"10",visitor:!1})</script></body></html>